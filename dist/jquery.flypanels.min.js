/*! flypanels - v0.7.0 - 2015-02-17
* https://github.com/SubZane/flyPanels
* Copyright (c) 2015 Andreas Norman; Licensed MIT */
!function(a){function b(b,d){function e(){f(),y=a(".flypanels-left").css("width"),u(),d.treeMenu.init&&g(),x("onInit")}function f(){a(".flypanels-left").css("height",B),a(".flypanels-right").css("height",B),a(".flypanels-overlay").css("height",B)}function g(){(kitUtils.isAndroid()||kitUtils.isIOS())&&a(".flypanels-treemenu").addClass("touch"),a(".flypanels-treemenu li.haschildren "+d.treeMenu.expandHandler).click(function(b){a(this).parent().parent().toggleClass("expanded"),b.preventDefault()})}function h(){s(),q(),n()}function i(){x("onCloseLeft")}function j(){x("onCloseRight")}function k(){x("onOpenLeft")}function l(){x("onOpenRight")}function m(){a(".flypanels-content").on("click touchmove touchend touchleave touchcancel",function(a){h(),a.preventDefault()}),x("onOpen")}function n(){a(".flypanels-content").off("click touchmove touchend touchleave touchcancel"),x("onClose")}function o(){a("body").toggleClass("flypanels-open"),a("html").toggleClass("flypanels-open")}function p(b){a(".flypanels-right").transition({marginRight:"0px",duration:200,easing:"in",complete:function(){A.addClass("openright"),o(),a(this).find('[data-panel="'+b+'"]').show(),l(),m()}}),a(".flypanels-main").transition({marginLeft:"-"+y,opacity:d.fadedOpacity,duration:200,easing:"in"})}function q(){a(".flypanels-right").transition({marginRight:"-"+y,duration:200,easing:"in",complete:function(){A.removeClass("openright"),o(),a(".offcanvas .panelcontent").hide(),j(),n()}}),a(".flypanels-main").transition({marginLeft:"0",opacity:1,duration:200,easing:"in"})}function r(b){a(".flypanels-left").transition({marginLeft:"0px",duration:200,easing:"in",complete:function(){A.addClass("openleft"),o(),a(this).find('[data-panel="'+b+'"]').show(),k(),m()}}),a(".flypanels-main").transition({marginRight:"-100%",opacity:d.fadedOpacity,duration:200,easing:"in"})}function s(){a(".flypanels-left").transition({marginLeft:"-"+y,duration:200,easing:"in",complete:function(){A.removeClass("openleft"),o(),a(".offcanvas .panelcontent").hide(),i(),n()}}),a(".flypanels-main").transition({marginLeft:"0",opacity:1,duration:200,easing:"in"})}function t(){console.log("afterWindowResize"),B=window.innerHeight,f()}function u(){if(a(".panelcontent").on("touchmove",function(b){a(this).prop("scrollHeight")<=parseInt(B,10)&&b.preventDefault()}),a(".offcanvas").on("touchmove",function(a){a.preventDefault()}).on("touchmove",".panelcontent",function(a){a.stopPropagation()}),a(".flypanels-button-left").on("click",function(){var b=a(this).data("panel");a(".flypanels-container").hasClass("openleft")?s():r(b)}),a(".flypanels-button-right").on("click",function(){var b=a(this).data("panel");a(".flypanels-container").hasClass("openright")?q():p(b)}),C===!0){var b;a(window).resize(function(){clearTimeout(b),b=setTimeout(t,100)})}a(window).bind("orientationchange",function(){f()}),x("onLoad")}function v(a,b){return b?void(d[a]=b):d[a]}function w(){A.each(function(){var b=a(this);x("onDestroy"),b.removeData("plugin_"+c)})}function x(a){void 0!==d[a]&&d[a].call(z)}var y,z=b,A=a(b),B=window.innerHeight,C=!0,D=(parseInt(a(".flypanels-topbar").css("height"),10),{init:!1,expandHandler:"span.expand"});return d.treeMenu=a.extend({},D,d.treeMenu),d=a.extend({},a.fn[c].defaults,d),e(),{option:v,destroy:w}}var c="flyPanels";a.fn[c]=function(d){if("string"==typeof arguments[0]){var e,f=arguments[0],g=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!a.data(this,"plugin_"+c)||"function"!=typeof a.data(this,"plugin_"+c)[f])throw new Error("Method "+f+" does not exist on jQuery."+c);e=a.data(this,"plugin_"+c)[f].apply(this,g)}),void 0!==e?e:this}return"object"!=typeof d&&d?void 0:this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})},a.fn[c].defaults={fadedOpacity:"0.2",onInit:function(){},onLoad:function(){},onOpenLeft:function(){},onOpenRight:function(){},onCloseLeft:function(){},onCloseRight:function(){},onDestroy:function(){}}}(jQuery);