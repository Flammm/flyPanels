/*! flypanels - v0.14.0 - 2015-11-02
* https://github.com/SubZane/flyPanels
* Copyright (c) 2015 Andreas Norman; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.flyPanels=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){"use strict";var b,c,d,e,f={},g=!!document.querySelector&&!!a.addEventListener,h=window.innerHeight,i=!0,j=(document.querySelector(".flypanels-topbar").clientHeight,{init:!1,expandHandler:"a.expand"}),k={init:!1,saveQueryCookie:!1,searchPanel:document.querySelector(".offcanvas").querySelector('[data-panel="search"]')},l={container:".flypanels-container",initClass:"js-flyPanels",callbackBefore:function(){},callbackAfter:function(){}},m=function(){document.querySelector(".flypanels-left").style.height=h+"px",document.querySelector(".flypanels-right").style.height=h+"px";var a=document.querySelector(".flypanels-overlay");a&&(a.style.height=h)},n=function(){(C()||D())&&document.querySelector(".flypanels-treemenu").classList.add("touch");var a=document.querySelectorAll(".flypanels-treemenu li.haschildren "+b.treeMenu.expandHandler);G(a,function(a){a.addEventListener("click",function(a){this.parentElement.parentElement.classList.toggle("expanded"),a.preventDefault()})})},o=function(){y(),w(),u()},p=function(){document.querySelector("body").classList.remove("flypanels-open"),document.querySelector("html").classList.remove("flypanels-open"),E("onCloseLeft")},q=function(){document.querySelector("body").classList.remove("flypanels-open"),document.querySelector("html").classList.remove("flypanels-open"),E("onCloseRight")},r=function(){document.querySelector("body").classList.add("flypanels-open"),document.querySelector("html").classList.add("flypanels-open"),E("onOpenLeft")},s=function(){document.querySelector("body").classList.add("flypanels-open"),document.querySelector("html").classList.add("flypanels-open"),E("onOpenRight")},t=function(){document.querySelector(".flypanels-content").innerHTML+='<div id="flypanels-overlay" class="overlay"></div>',document.querySelector(".flypanels-content").addEventListener("click touchmove touchend touchleave touchcancel",function(a){o(),a.preventDefault()}),E("onOpen")},u=function(){document.querySelector(".flypanels-content #flypanels-overlay").remove(),document.querySelector(".flypanels-content").removeEventListener("click touchmove touchend touchleave touchcancel"),E("onClose")},v=function(a){d.classList.add("openright"),setTimeout(function(){document.querySelector(".flypanels-right").querySelector('[data-panel="'+a+'"]').style.display="block",s(),t()},200)},w=function(){d.classList.remove("openright"),setTimeout(function(){var a=document.querySelectorAll(".flypanels-right .panelcontent");G(a,function(a){a.style.display="none"}),q(),u()},200)},x=function(a){d.classList.add("openleft"),setTimeout(function(){document.querySelector(".flypanels-left").querySelector('[data-panel="'+a+'"]').style.display="block",r(),t()},200)},y=function(){d.classList.remove("openleft"),setTimeout(function(){var a=document.querySelectorAll(".flypanels-left .panelcontent");G(a,function(a){a.style.display="none"}),p(),u()},200)},z=function(){h=window.innerHeight,m()},A=function(){var a=document.querySelectorAll(".panelcontent","touchmove");G(a,function(a){a.addEventListener("touchmove",function(a){panel.scrollHeight<=parseInt(h,10)&&a.preventDefault()})});var b=document.querySelectorAll(".panelcontent","touchmove");G(b,function(a){a.addEventListener("touchmove",function(a){a.preventDefault()})});var c=document.querySelectorAll(".offcanvas .panelcontent","touchmove");G(c,function(a){a.addEventListener("touchmove",function(a){a.preventDefault()})}),document.querySelector(".flypanels-button-left").addEventListener("click",function(){var a=this.getAttribute("data-panel");d(document.querySelector(".flypanels-container"),"openleft")?y():x(a)}),document.querySelector(".flypanels-button-right").addEventListener("click",function(){var a=this.getAttribute("data-panel");d(document.querySelectorAll(".flypanels-container"),"openright")?w():v(a)});var d=function(a,b){return a.classList.contains(b)?!0:!1};i===!0&&(window.onresize=B),window.addEventListener("orientationchange",function(){m()}),E("onLoad")},B=function(){var a;clearTimeout(a),a=setTimeout(z,100)},C=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1?!0:!1},D=function(){return navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?!0:!1},E=function(a){void 0!==b[a]&&b[a].call(d)},F=function(a,b){var c={};return G(a,function(b,d){c[d]=a[d]}),G(b,function(a,d){c[d]=b[d]}),c},G=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=0,f=a.length;f>e;e++)b.call(c,a[e],e,a)};return f.destroy=function(){b&&(document.documentElement.classList.remove(b.initClass),document.removeEventListener("click",eventHandler,!1),b=null,c=null)},f.init=function(a){g&&(f.destroy(),a.treeMenu=F(j,a.treeMenu||{}),a.search=F(k,a.search||{}),b=F(l,a||{}),d=document.querySelector(b.container),m(),e=document.querySelectorAll(".flypanels-left").width,A(),console.log(b),b.search.init,b.treeMenu.init&&n(),d.classList.remove("preload"),E("onInit"))},f});